<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <title>Workout Tracker</title>
    
    <!-- PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Workout">
    <meta name="theme-color" content="#000000">
    <meta name="background-color" content="#000000">
    
    <!-- PWA Icons -->
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE4MCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxODAiIGhlaWdodD0iMTgwIiByeD0iNDAiIGZpbGw9IiMwMDAwMDAiLz4KPHN2ZyB4PSI0NSIgeT0iNDUiIHdpZHRoPSI5MCIgaGVpZ2h0PSI5MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIj4KPHBhdGggZD0iTTIyIDEyYzAtNS41Mi00LjQ4LTEwLTEwLTEwUzIgNi40OCAyIDEyczQuNDggMTAgMTAgMTAgMTAtNC40OCAxMC0xMFoiIHN0cm9rZT0iIzMwZDE1OCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+CjxwYXRoIGQ9Ik04IDEyaDgiIHN0cm9rZT0iIzMwZDE1OCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiLz4KPHN2ZyB4PSIzMCIgeT0iMzAiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIj4KPHBhdGggZD0iTTEyIDJjNS41MiAwIDEwIDQuNDggMTAgMTBzLTQuNDggMTAtMTAgMTBTMiAxNy41MiAyIDEyczQuNDgtMTAgMTAtMTBaIiBzdHJva2U9IiNmZjNiMzAiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSIvPgo8L3N2Zz4KPHN2ZyB4PSI2MCIgeT0iNjAiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIj4KPHBhdGggZD0iTTEyIDJjNS41MiAwIDEwIDQuNDggMTAgMTBzLTQuNDggMTAtMTAgMTBTMiAxNy41MiAyIDEyczQuNDgtMTAgMTAtMTBaIiBzdHJva2U9IiMwMDdhZmYiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSIvPgo8L3N2Zz4KPHN2ZyB4PSI3NSIgeT0iNzUiIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIj4KPHBhdGggZD0iTTYgMTJoMTJtLTYtNnY2bTAtNnY2IiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+Cjwvc3ZnPgo8L3N2Zz4KPC9zdmc+">
    
    <!-- Manifest -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIldvcmtvdXQgVHJhY2tlciIsCiAgInNob3J0X25hbWUiOiAiV29ya291dCIsCiAgImRlc2NyaXB0aW9uIjogIlBlcnNvbmFsIGd5bSB3b3Jrb3V0IHRyYWNrZXIgd2l0aCBhY3Rpdml0eSByaW5ncyIsCiAgInN0YXJ0X3VybCI6ICIvIiwKICAiZGlzcGxheSI6ICJzdGFuZGFsb25lIiwKICAiYmFja2dyb3VuZF9jb2xvciI6ICIjMDAwMDAwIiwKICAidGhlbWVfY29sb3IiOiAiIzAwMDAwMCIsCiAgIm9yaWVudGF0aW9uIjogInBvcnRyYWl0IiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpTVRnd0lpQm9aV2xuYUhROUlqRTRNQ0lpSUhacFpYZENiM2c5SWpBZ01DQXhPREFnTVRnd0lpQm1hV3hzUFNKdWIyNWxJaUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lQZz09IiwKICAgICAgInNpemVzIjogIjE5MngxOTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9zdmcreG1sIgogICAgfSwKICAgIHsKICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIzYVdSMGFEMGlOVEV5SWlCb1pXbG5hSFE5SWpVeE1pSWlJSFpwWlhkQ2IzZzlJakFnTUNBMU1USWdOVEV5SWlCbWFXeHNQU0p1YjI1bElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaVBnPT0iLAogICAgICAic2l6ZXMiOiAiNTEyeDUxMiIsCiAgICAgICJ0eXBlIjogImltYWdlL3N2Zyt4bWwiCiAgICB9CiAgXQp9">

<style>
/* push content below the notch on iOS */
body {
  padding-top: env(safe-area-inset-top);
}

.status-bar-protector {
  position: fixed;
  top: 0; left: 0; right: 0;
  height: env(safe-area-inset-top);
  padding-bottom: 20px;
  background: linear-gradient(to bottom, #000, rgba(0,0,0,0));
  pointer-events: none;
  z-index: 10000;
}

/* “Mark as Complete” button */
.mark-complete {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: #fff;
  padding: 8px 16px;
  margin-top: 12px;
  border-radius: 12px;
  font-size: 14px;
  cursor: pointer;
  transition: background .2s;
}
.mark-complete:hover {
  background: rgba(255,255,255,0.2);
}


        /* Add this to hide Safari UI when launched from home screen */
        @media all and (display-mode: standalone) {
            body {
                -webkit-user-select: none;
                -webkit-touch-callout: none;
            }
        }
    </style>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            background-color: #000000 !important;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', sans-serif;
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
        }



        .header {
            padding: 20px 20px 30px;
        }

        .date-text {
            font-size: 15px;
            color: #8e8e93;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        .main-title {
            font-size: 34px;
            font-weight: 700;
            color: #ffffff;
            letter-spacing: -1px;
            margin-bottom: 8px;
        }

        .profile-pic {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 20px;
            background: linear-gradient(135deg, #007aff, #00d4ff);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: 600;
        }

        .workout-tabs {
            display: flex;
            padding: 0 20px 20px;
            gap: 12px;
        }

        .tab-button {
            flex: 1;
            background: #1c1c1e;
            border: none;
            border-radius: 12px;
            padding: 16px 12px;
            color: #8e8e93;
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .tab-button.active {
            background: #30d158;
            color: #000000;
        }

        .card {
            background: #1c1c1e;
            border-radius: 12px;
            margin: 0 20px 16px;
            padding: 20px;
            position: relative;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 20px;
            font-weight: 600;
            color: #ffffff;
        }

        .card-subtitle {
            font-size: 15px;
            color: #8e8e93;
            margin-top: 2px;
        }

        .chevron {
            width: 8px;
            height: 8px;
            border-right: 2px solid #8e8e93;
            border-top: 2px solid #8e8e93;
            transform: rotate(45deg);
        }



        .exercise-card {
            margin-bottom: 16px;
            position: relative;
        }

        .exercise-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
            position: relative;
        }

        .rest-timer {
            position: absolute;
            top: 0;
            right: 40px;
            background: rgba(0,122,255,0.9);
            color: white;
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            animation: slideIn 0.3s ease;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .rest-timer:hover {
            background: rgba(0,122,255,1);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .exercise-title {
            font-size: 20px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 4px;
        }

        .exercise-meta {
            font-size: 15px;
            color: #8e8e93;
        }

        .exercise-icon {
            font-size: 24px;
        }

        .sets-grid {
            display: flex;
            justify-content: space-around;
            gap: 12px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .set-ring {
            position: relative;
            width: 70px;
            height: 70px;
            cursor: pointer;
            transition: transform 0.2s ease;
            flex-shrink: 0;
        }

        .set-ring:active {
            transform: scale(0.95);
        }

        .set-ring svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .set-ring circle {
            fill: none;
            stroke-width: 6;
            stroke-linecap: round;
        }

        .set-bg {
            stroke: rgba(255,255,255,0.1);
        }

        .set-progress {
            stroke: #30d158;
            transition: stroke-dasharray 0.3s ease;
        }

        .set-number {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 15px;
            font-weight: 600;
            color: #ffffff;
        }

        .set-ring.completed .set-number {
            color: #30d158;
        }

        .progress-summary {
            display: flex;
            justify-content: space-between;
            font-size: 15px;
            color: #8e8e93;
            padding-top: 16px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .cardio-card {
            background: linear-gradient(135deg, #ff9500, #ff6b00);
            position: relative;
            overflow: hidden;
            transition: background 0.3s ease;
        }

        .cardio-card.high-intensity {
            background: linear-gradient(135deg, #ff3b30, #d12b20);
        }

        .cardio-card.recovery {
            background: linear-gradient(135deg, #30d158, #28a745);
        }

        .cardio-card.flash {
            animation: cardioFlash 1s;
        }

        @keyframes cardioFlash {
            0%, 100% { 
                background: var(--current-bg); 
            }
            50% { 
                background: var(--flash-bg); 
            }
        }

        .cardio-card.high-intensity.flash {
            --current-bg: linear-gradient(135deg, #ff3b30, #d12b20);
            --flash-bg: linear-gradient(135deg, #cc2e26, #a8221c);
        }

        .cardio-card.recovery.flash {
            --current-bg: linear-gradient(135deg, #30d158, #28a745);
            --flash-bg: linear-gradient(135deg, #26a649, #1f7a35);
        }

        .cardio-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 40%, rgba(255,255,255,0.1), transparent 70%);
            pointer-events: none;
        }

        .cardio-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            position: relative;
        }

        .fullscreen-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.2s ease;
            backdrop-filter: blur(10px);
        }

        .fullscreen-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .fullscreen-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: inherit;
            z-index: 1000;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: background 0.3s ease;
        }

        .fullscreen-overlay.show {
            display: flex;
        }

        .fullscreen-overlay .exit-btn {
            position: absolute;
            top: 40px;
            right: 40px;
            background: rgba(0,0,0,0.5);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.2s ease;
        }

        .fullscreen-overlay .exit-btn:hover {
            background: rgba(0,0,0,0.7);
        }

        .fullscreen-overlay .timer-display {
            font-size: 120px;
            font-weight: 200;
            margin-bottom: 20px;
        }

        .fullscreen-overlay .timer-subtitle {
            font-size: 24px;
            margin-bottom: 40px;
        }

        .fullscreen-overlay .timer-controls {
            gap: 24px;
        }

        .fullscreen-overlay .timer-button {
            padding: 16px 32px;
            font-size: 20px;
        }

        .cardio-title {
            font-size: 20px;
            font-weight: 600;
            color: #ffffff;
        }

        .cardio-icon {
            font-size: 24px;
        }

        .timer-display {
            font-size: 48px;
            font-weight: 300;
            text-align: center;
            margin-bottom: 8px;
            font-variant-numeric: tabular-nums;
            letter-spacing: -2px;
            position: relative;
        }

        .timer-subtitle {
            text-align: center;
            font-size: 16px;
            margin-bottom: 24px;
            position: relative;
            font-weight: 600;
            transition: all 0.3s ease;
            background: rgba(0,0,0,0.6);
            padding: 8px 16px;
            border-radius: 12px;
            display: block;
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
            backdrop-filter: blur(10px);
        }

        .timer-controls {
            display: flex;
            justify-content: center;
            gap: 16px;
            position: relative;
        }

        .timer-button {
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.3);
            color: #ffffff;
            padding: 12px 24px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            transition: all 0.2s ease;
        }

        .timer-button:active {
            transform: scale(0.95);
            background: rgba(255,255,255,0.3);
        }

        .sessions-card {
            display: flex;
            align-items: center;
        }

        .session-icon {
            width: 40px;
            height: 40px;
            background: #30d158;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 16px;
            font-size: 20px;
        }

        .session-info {
            flex: 1;
        }

        .session-name {
            font-size: 17px;
            font-weight: 400;
            color: #ffffff;
            margin-bottom: 2px;
        }

        .session-value {
            font-size: 24px;
            font-weight: 600;
            color: #30d158;
        }

        .session-date {
            font-size: 13px;
            color: #8e8e93;
            margin-top: 4px;
        }

        .chart-placeholder {
            height: 60px;
            margin-top: 16px;
            background: linear-gradient(to top, rgba(48,209,88,0.3) 0%, rgba(48,209,88,0.1) 50%, transparent 100%);
            border-radius: 4px;
            position: relative;
        }

        .reset-card {
            display: flex;
            gap: 12px;
        }

        .reset-button {
            background: none;
            border: 1px solid rgba(255,59,48,0.3);
            color: #ff3b30;
            padding: 16px 32px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            font-size: 17px;
            transition: all 0.2s ease;
            flex: 1;
        }

        .reset-button:active {
            background: rgba(255,59,48,0.1);
        }

        .share-button {
            background: none;
            border: 1px solid rgba(48,209,88,0.3);
            color: #30d158;
            padding: 16px 32px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            font-size: 17px;
            transition: all 0.2s ease;
            flex: 1;
        }

        .share-button:active {
            background: rgba(48,209,88,0.1);
        }

        .weights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
            gap: 8px;
            margin-top: 12px;
        }

        .weight-button {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: #ffffff;
            padding: 8px 4px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            text-align: center;
            transition: all 0.2s ease;
            min-height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .weight-button:active {
            background: rgba(255,255,255,0.2);
            transform: scale(0.95);
        }

        .stats-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(10px);
            z-index: 2000;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .stats-modal.show {
            display: flex;
        }

        .stats-content {
            background: #1c1c1e;
            border-radius: 16px;
            padding: 24px;
            max-width: 400px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .stats-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .stats-title {
            font-size: 20px;
            font-weight: 600;
            color: #ffffff;
        }

        .stats-close {
            background: none;
            border: none;
            color: #8e8e93;
            font-size: 24px;
            cursor: pointer;
            padding: 4px;
        }

        .stats-text {
            background: #2c2c2e;
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 16px;
            color: #ffffff;
            font-family: 'SF Mono', Consolas, monospace;
            font-size: 13px;
            line-height: 1.4;
            white-space: pre-wrap;
            resize: none;
            width: 100%;
            min-height: 200px;
            margin-bottom: 16px;
        }

        .stats-copy {
            background: #30d158;
            border: none;
            color: #000000;
            padding: 12px 24px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            width: 100%;
            transition: all 0.2s ease;
        }

        .stats-copy:active {
            background: #28a745;
            transform: scale(0.98);
        }





        .content-container {
            padding-bottom: 40px;
        }



        .workout-content {
            display: none;
        }

        .workout-content.active {
            display: block;
        }

        @media (max-width: 480px) {
            .sets-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
    </style>
</head>
<body>
<!-- ↓ iOS notch / Dynamic-Island safe-area protector -->
<div class="status-bar-protector"></div>


    <div class="header">
        <div class="date-text" id="current-date">SUNDAY, JUN 15</div>
        <div class="main-title" id="main-title">Good morning, Arjun</div>
        <div class="profile-pic">💪</div>
    </div>

    <div class="workout-tabs">
        <button class="tab-button active" onclick="switchWorkout('push')">Push</button>
        <button class="tab-button" onclick="switchWorkout('pull')">Pull</button>
        <button class="tab-button" onclick="switchWorkout('legs')">Legs</button>
    </div>

    <div class="content-container">

        <!-- Push Workout -->
        <div id="push-content" class="workout-content active">
            <div class="card exercise-card">
                <div class="exercise-header">
                    <div>
                        <div class="exercise-title">Incline Dumbbell Press</div>
                        <div class="exercise-meta">4 sets × 8-10 reps</div>
                    </div>
                    <div class="exercise-icon">💪</div>
                </div>
                <div class="sets-grid">
                    <div class="set-ring" onclick="toggleSet(this, 'push')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">1</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'push')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">2</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'push')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">3</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'push')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">4</div>
                    </div>
                </div>
                <div class="weights-grid">
                    <div class="weight-button" onclick="editWeight('push', 'Incline Dumbbell Press', 1)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('push', 'Incline Dumbbell Press', 2)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('push', 'Incline Dumbbell Press', 3)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('push', 'Incline Dumbbell Press', 4)">0 lbs</div>
                </div>
            </div>

            <div class="card exercise-card">
                <div class="exercise-header">
                    <div>
                        <div class="exercise-title">Flat Dumbbell Press</div>
                        <div class="exercise-meta">3 sets × 10-12 reps</div>
                    </div>
                    <div class="exercise-icon">🏋️</div>
                </div>
                <div class="sets-grid">
                    <div class="set-ring" onclick="toggleSet(this, 'push')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">1</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'push')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">2</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'push')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">3</div>
                    </div>
                </div>
                <div class="weights-grid">
                    <div class="weight-button" onclick="editWeight('push', 'Flat Dumbbell Press', 1)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('push', 'Flat Dumbbell Press', 2)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('push', 'Flat Dumbbell Press', 3)">0 lbs</div>
                </div>
            </div>

            <div class="card exercise-card">
                <div class="exercise-header">
                    <div>
                        <div class="exercise-title">Pec Flys</div>
                        <div class="exercise-meta">3 sets × 12-15 reps</div>
                    </div>
                    <div class="exercise-icon">🤲</div>
                </div>
                <div class="sets-grid">
                    <div class="set-ring" onclick="toggleSet(this, 'push')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">1</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'push')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">2</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'push')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">3</div>
                    </div>
                </div>
                <div class="weights-grid">
                    <div class="weight-button" onclick="editWeight('push', 'Pec Flys', 1)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('push', 'Pec Flys', 2)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('push', 'Pec Flys', 3)">0 lbs</div>
                </div>
            </div>

            <div class="card exercise-card">
                <div class="exercise-header">
                    <div>
                        <div class="exercise-title">Tricep Pushdown</div>
                        <div class="exercise-meta">3 sets × 12-15 reps</div>
                    </div>
                    <div class="exercise-icon">💪</div>
                </div>
                <div class="sets-grid">
                    <div class="set-ring" onclick="toggleSet(this, 'push')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">1</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'push')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">2</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'push')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">3</div>
                    </div>
                </div>
                <div class="weights-grid">
                    <div class="weight-button" onclick="editWeight('push', 'Tricep Pushdown', 1)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('push', 'Tricep Pushdown', 2)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('push', 'Tricep Pushdown', 3)">0 lbs</div>
                </div>
            </div>

            <div class="card exercise-card">
                <div class="exercise-header">
                    <div>
                        <div class="exercise-title">Overhead Press</div>
                        <div class="exercise-meta">3 sets × 8-10 reps</div>
                    </div>
                    <div class="exercise-icon">🎯</div>
                </div>
                <div class="sets-grid">
                    <div class="set-ring" onclick="toggleSet(this, 'push')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">1</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'push')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">2</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'push')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">3</div>
                    </div>
                </div>
                <div class="weights-grid">
                    <div class="weight-button" onclick="editWeight('push', 'Overhead Press', 1)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('push', 'Overhead Press', 2)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('push', 'Overhead Press', 3)">0 lbs</div>
                </div>
            </div>

            <div class="card exercise-card">
                <div class="exercise-header">
                    <div>
                        <div class="exercise-title">Lateral Raises</div>
                        <div class="exercise-meta">3 sets × 15 reps</div>
                    </div>
                    <div class="exercise-icon">🔥</div>
                </div>
                <div class="sets-grid">
                    <div class="set-ring" onclick="toggleSet(this, 'push')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">1</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'push')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">2</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'push')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">3</div>
                    </div>
                </div>
                <div class="weights-grid">
                    <div class="weight-button" onclick="editWeight('push', 'Lateral Raises', 1)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('push', 'Lateral Raises', 2)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('push', 'Lateral Raises', 3)">0 lbs</div>
                </div>
            </div>

            <div class="card cardio-card" id="hiit-card">
                <div class="cardio-header">
                    <div class="cardio-title">HIIT Cardio</div>
                    <div style="display: flex; gap: 12px; align-items: center;">
                        <div class="cardio-icon">⚡</div>
                        <button class="fullscreen-btn" onclick="openOverlay('hiit')" title="Fullscreen">⛶</button>
                    </div>
                </div>
                <div class="timer-display" id="hiit-timer">15:00</div>
                <div class="timer-subtitle" id="hiit-phase">30s high intensity / 90s recovery</div>
                <div class="timer-controls">
                    <button class="timer-button" onclick="startHIITTimer()">Start</button>
                    <button class="timer-button" onclick="resetTimer('hiit')">Reset</button>
                </div>
            </div>
        </div>

        <!-- Pull Workout -->
        <div id="pull-content" class="workout-content">
            <div class="card exercise-card">
                <div class="exercise-header">
                    <div>
                        <div class="exercise-title">Lat Pulldown</div>
                        <div class="exercise-meta">4 sets × 8-10 reps</div>
                    </div>
                    <div class="exercise-icon">🎯</div>
                </div>
                <div class="sets-grid">
                    <div class="set-ring" onclick="toggleSet(this, 'pull')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">1</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'pull')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">2</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'pull')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">3</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'pull')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">4</div>
                    </div>
                </div>
                <div class="weights-grid">
                    <div class="weight-button" onclick="editWeight('pull', 'Lat Pulldown', 1)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('pull', 'Lat Pulldown', 2)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('pull', 'Lat Pulldown', 3)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('pull', 'Lat Pulldown', 4)">0 lbs</div>
                </div>
            </div>

            <div class="card exercise-card">
                <div class="exercise-header">
                    <div>
                        <div class="exercise-title">Mid Row</div>
                        <div class="exercise-meta">4 sets × 10-12 reps</div>
                    </div>
                    <div class="exercise-icon">💪</div>
                </div>
                <div class="sets-grid">
                    <div class="set-ring" onclick="toggleSet(this, 'pull')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">1</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'pull')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">2</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'pull')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">3</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'pull')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">4</div>
                    </div>
                </div>
                <div class="weights-grid">
                    <div class="weight-button" onclick="editWeight('pull', 'Mid Row', 1)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('pull', 'Mid Row', 2)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('pull', 'Mid Row', 3)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('pull', 'Mid Row', 4)">0 lbs</div>
                </div>
            </div>

            <div class="card exercise-card">
                <div class="exercise-header">
                    <div>
                        <div class="exercise-title">Cable Pullovers</div>
                        <div class="exercise-meta">3 sets × 12-15 reps</div>
                    </div>
                    <div class="exercise-icon">🏋️</div>
                </div>
                <div class="sets-grid">
                    <div class="set-ring" onclick="toggleSet(this, 'pull')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">1</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'pull')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">2</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'pull')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">3</div>
                    </div>
                </div>
                <div class="weights-grid">
                    <div class="weight-button" onclick="editWeight('pull', 'Cable Pullovers', 1)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('pull', 'Cable Pullovers', 2)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('pull', 'Cable Pullovers', 3)">0 lbs</div>
                </div>
            </div>

            <div class="card exercise-card">
                <div class="exercise-header">
                    <div>
                        <div class="exercise-title">Bicep Curls</div>
                        <div class="exercise-meta">3 sets × 12-15 reps</div>
                    </div>
                    <div class="exercise-icon">💪</div>
                </div>
                <div class="sets-grid">
                    <div class="set-ring" onclick="toggleSet(this, 'pull')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">1</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'pull')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">2</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'pull')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">3</div>
                    </div>
                </div>
                <div class="weights-grid">
                    <div class="weight-button" onclick="editWeight('pull', 'Bicep Curls', 1)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('pull', 'Bicep Curls', 2)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('pull', 'Bicep Curls', 3)">0 lbs</div>
                </div>
            </div>

            <div class="card exercise-card">
                <div class="exercise-header">
                    <div>
                        <div class="exercise-title">Face Pulls</div>
                        <div class="exercise-meta">3 sets × 15 reps</div>
                    </div>
                    <div class="exercise-icon">🎯</div>
                </div>
                <div class="sets-grid">
                    <div class="set-ring" onclick="toggleSet(this, 'pull')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">1</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'pull')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">2</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'pull')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">3</div>
                    </div>
                </div>
                <div class="weights-grid">
                    <div class="weight-button" onclick="editWeight('pull', 'Face Pulls', 1)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('pull', 'Face Pulls', 2)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('pull', 'Face Pulls', 3)">0 lbs</div>
                </div>
            </div>

            <div class="card exercise-card">
                <div class="exercise-header">
                    <div>
                        <div class="exercise-title">Reverse Flys</div>
                        <div class="exercise-meta">3 sets × 15 reps</div>
                    </div>
                    <div class="exercise-icon">🔥</div>
                </div>
                <div class="sets-grid">
                    <div class="set-ring" onclick="toggleSet(this, 'pull')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">1</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'pull')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">2</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'pull')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">3</div>
                    </div>
                </div>
                <div class="weights-grid">
                    <div class="weight-button" onclick="editWeight('pull', 'Reverse Flys', 1)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('pull', 'Reverse Flys', 2)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('pull', 'Reverse Flys', 3)">0 lbs</div>
                </div>
            </div>

            <div class="card cardio-card" id="steady-card">
                <div class="cardio-header">
                    <div class="cardio-title">Steady Cardio</div>
                    <div style="display: flex; gap: 12px; align-items: center;">
                        <div class="cardio-icon">🚶‍♂️</div>
                        <button class="fullscreen-btn" onclick="openOverlay('steady')" title="Fullscreen">⛶</button>
                    </div>
                </div>
                <div class="timer-display" id="steady-timer">25:00</div>
                <div class="timer-subtitle">Low intensity steady state</div>
                <div class="timer-controls">
                    <button class="timer-button" onclick="startTimer('steady')">Start</button>
                    <button class="timer-button" onclick="resetTimer('steady')">Reset</button>
                    <button class="timer-button" onclick="markComplete('steady')">Done</button>
                </div>
            </div>
        </div>

        <!-- Legs Workout -->
        <div id="legs-content" class="workout-content">
            <div class="card exercise-card">
                <div class="exercise-header">
                    <div>
                        <div class="exercise-title">Leg Press</div>
                        <div class="exercise-meta">4 sets × 12-15 reps</div>
                    </div>
                    <div class="exercise-icon">🦵</div>
                </div>
                <div class="sets-grid">
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">1</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">2</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">3</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">4</div>
                    </div>
                </div>
                <div class="weights-grid">
                    <div class="weight-button" onclick="editWeight('legs', 'Leg Press', 1)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('legs', 'Leg Press', 2)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('legs', 'Leg Press', 3)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('legs', 'Leg Press', 4)">0 lbs</div>
                </div>
            </div>

            <div class="card exercise-card">
                <div class="exercise-header">
                    <div>
                        <div class="exercise-title">Leg Extension</div>
                        <div class="exercise-meta">3 sets × 15 reps</div>
                    </div>
                    <div class="exercise-icon">🏋️</div>
                </div>
                <div class="sets-grid">
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">1</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">2</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">3</div>
                    </div>
                </div>
                <div class="weights-grid">
                    <div class="weight-button" onclick="editWeight('legs', 'Leg Extension', 1)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('legs', 'Leg Extension', 2)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('legs', 'Leg Extension', 3)">0 lbs</div>
                </div>
            </div>

            <div class="card exercise-card">
                <div class="exercise-header">
                    <div>
                        <div class="exercise-title">Leg Curl</div>
                        <div class="exercise-meta">3 sets × 15 reps</div>
                    </div>
                    <div class="exercise-icon">💪</div>
                </div>
                <div class="sets-grid">
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">1</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">2</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">3</div>
                    </div>
                </div>
                <div class="weights-grid">
                    <div class="weight-button" onclick="editWeight('legs', 'Leg Curl', 1)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('legs', 'Leg Curl', 2)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('legs', 'Leg Curl', 3)">0 lbs</div>
                </div>
            </div>

            <div class="card exercise-card">
                <div class="exercise-header">
                    <div>
                        <div class="exercise-title">Walking Lunges</div>
                        <div class="exercise-meta">3 sets × 20 steps</div>
                    </div>
                    <div class="exercise-icon">🚶‍♂️</div>
                </div>
                <div class="sets-grid">
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">1</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">2</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">3</div>
                    </div>
                </div>
                <div class="weights-grid">
                    <div class="weight-button" onclick="editWeight('legs', 'Walking Lunges', 1)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('legs', 'Walking Lunges', 2)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('legs', 'Walking Lunges', 3)">0 lbs</div>
                </div>
            </div>

            <div class="card exercise-card">
                <div class="exercise-header">
                    <div>
                        <div class="exercise-title">Calf Raises</div>
                        <div class="exercise-meta">4 sets × 20 reps</div>
                    </div>
                    <div class="exercise-icon">🔥</div>
                </div>
                <div class="sets-grid">
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">1</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">2</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">3</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">4</div>
                    </div>
                </div>
                <div class="weights-grid">
                    <div class="weight-button" onclick="editWeight('legs', 'Calf Raises', 1)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('legs', 'Calf Raises', 2)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('legs', 'Calf Raises', 3)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('legs', 'Calf Raises', 4)">0 lbs</div>
                </div>
            </div>

            <div class="card exercise-card">
                <div class="exercise-header">
                    <div>
                        <div class="exercise-title">Cable Oblique Twists</div>
                        <div class="exercise-meta">3 sets × 15 each side</div>
                    </div>
                    <div class="exercise-icon">🌪️</div>
                </div>
                <div class="sets-grid">
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">1</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">2</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">3</div>
                    </div>
                </div>
                <div class="weights-grid">
                    <div class="weight-button" onclick="editWeight('legs', 'Cable Oblique Twists', 1)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('legs', 'Cable Oblique Twists', 2)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('legs', 'Cable Oblique Twists', 3)">0 lbs</div>
                </div>
            </div>

            <div class="card exercise-card">
                <div class="exercise-header">
                    <div>
                        <div class="exercise-title">Crunch Machine</div>
                        <div class="exercise-meta">3 sets × 20 reps</div>
                    </div>
                    <div class="exercise-icon">💪</div>
                </div>
                <div class="sets-grid">
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">1</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">2</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">3</div>
                    </div>
                </div>
                <div class="weights-grid">
                    <div class="weight-button" onclick="editWeight('legs', 'Crunch Machine', 1)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('legs', 'Crunch Machine', 2)">0 lbs</div>
                    <div class="weight-button" onclick="editWeight('legs', 'Crunch Machine', 3)">0 lbs</div>
                </div>
            </div>

            <div class="card exercise-card">
                <div class="exercise-header">
                    <div>
                        <div class="exercise-title">Plank Hold</div>
                        <div class="exercise-meta">3 sets × 45 seconds</div>
                    </div>
                    <div class="exercise-icon">⏱️</div>
                </div>
                <div class="sets-grid">
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">1</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">2</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">3</div>
                    </div>
                </div>
            </div>

            <div class="card exercise-card">
                <div class="exercise-header">
                    <div>
                        <div class="exercise-title">Mountain Climbers</div>
                        <div class="exercise-meta">3 sets × 30 seconds</div>
                    </div>
                    <div class="exercise-icon">🏔️</div>
                </div>
                <div class="sets-grid">
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">1</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">2</div>
                    </div>
                    <div class="set-ring" onclick="toggleSet(this, 'legs')">
                        <svg viewBox="0 0 36 36">
                            <circle class="set-bg" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="0"/>
                            <circle class="set-progress" cx="18" cy="18" r="14" stroke-dasharray="88" stroke-dashoffset="88"/>
                        </svg>
                        <div class="set-number">3</div>
                    </div>
                </div>
            </div>

            <div class="card cardio-card" id="cooldown-card">
                <div class="cardio-header">
                    <div class="cardio-title">Cool-down</div>
                    <div style="display: flex; gap: 12px; align-items: center;">
                        <div class="cardio-icon">🧘‍♂️</div>
                        <button class="fullscreen-btn" onclick="openOverlay('cooldown')" title="Fullscreen">⛶</button>
                    </div>
                </div>
                <div class="timer-display" id="cooldown-timer">15:00</div>
                <div class="timer-subtitle">Low intensity recovery</div>
                <div class="timer-controls">
                    <button class="timer-button" onclick="startTimer('cooldown')">Start</button>
                    <button class="timer-button" onclick="resetTimer('cooldown')">Reset</button>
                    <button class="timer-button" onclick="markComplete('cooldown')">Done</button>
                </div>
            </div>
        </div>

        <div class="card reset-card">
            <button class="reset-button" onclick="resetAllProgress()">Reset</button>
            <button class="share-button" onclick="openStatsModal()">Share Stats</button>
        </div>
    </div>

    <!-- Stats Modal -->
    <div id="stats-modal" class="stats-modal">
        <div class="stats-content">
            <div class="stats-header">
                <div class="stats-title">Workout Summary</div>
                <button class="stats-close" onclick="closeStatsModal()">×</button>
            </div>
            <textarea id="stats-text" class="stats-text" readonly></textarea>
            <button class="stats-copy" onclick="copyStats()">Copy to Clipboard</button>
        </div>
    </div>

    <!-- Full-screen overlay for any timer -->
    <div id="fullscreen-overlay" class="fullscreen-overlay">
    <button class="exit-btn" onclick="closeOverlay()">×</button>
    <div id="fullscreen-timer" class="timer-display">00:00</div>
    <div id="fullscreen-hiit-phase" class="timer-subtitle"></div>
    <div class="timer-controls">
        <button class="timer-button" onclick="startTimer(currentFullscreenTimer)">Start</button>
        <button class="timer-button" onclick="resetTimer(currentFullscreenTimer)">Reset</button>
    </div>
    </div>


    <script>

        function openOverlay(type) {
        currentFullscreenTimer = type;
        const overlay = document.getElementById('fullscreen-overlay');
        if (!overlay) return;

        // Show the overlay
        overlay.classList.add('show');

        // Copy over the current timer text
        const baseTimer = document.getElementById(`${type}-timer`);
        document.getElementById('fullscreen-timer').textContent =
            baseTimer ? baseTimer.textContent : '00:00';

        // If HIIT, copy its phase subtitle
        const phaseText = type === 'hiit'
            ? document.getElementById('hiit-phase').textContent
            : ''; 
        document.getElementById('fullscreen-hiit-phase').textContent = phaseText;

        // Apply the correct background class
        if (type === 'hiit') {
            const isHigh = hiitState.isHighIntensity;
            overlay.classList.toggle('high-intensity', isHigh);
            overlay.classList.toggle('recovery', !isHigh);
        }
        }

        function closeOverlay() {
        const overlay = document.getElementById('fullscreen-overlay');
        if (!overlay) return;
        overlay.classList.remove('show', 'high-intensity', 'recovery', 'flash');
        currentFullscreenTimer = null;
        }


        // Initialize data
        const totalSets = { push: 22, pull: 23, legs: 29 };
        let completedSets = { push: 0, pull: 0, legs: 0 };

        // Rest timer tracking
        let restTimers = {};

        // Fullscreen state
        let currentFullscreenTimer = null;

        // Notification functions
        async function requestNotificationPermission() {
            // Check if we've already asked before
            const hasAsked = localStorage.getItem('notificationAsked');
            
            if (Notification.permission === 'granted') {
                return true;
            } else if (Notification.permission === 'denied') {
                return false;
            } else if (!hasAsked) {
                // First time asking
                localStorage.setItem('notificationAsked', 'true');
                const permission = await Notification.requestPermission();
                return permission === 'granted';
            }
            
            return false;
        }

        function sendTimerNotification(timerType, message) {
            if (Notification.permission === 'granted') {
                const notification = new Notification('Workout Timer Complete! 🏋️', {
                    body: message,
                    icon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE4MCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxODAiIGhlaWdodD0iMTgwIiByeD0iNDAiIGZpbGw9IiMwMDAwMDAiLz4KPHN2ZyB4PSI0NSIgeT0iNDUiIHdpZHRoPSI5MCIgaGVpZ2h0PSI5MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIj4KPHBhdGggZD0iTTIyIDEyYzAtNS41Mi00LjQ4LTEwLTEwLTEwUzIgNi40OCAyIDEyczQuNDggMTAgMTAgMTAgMTAtNC40OCAxMC0xMFoiIHN0cm9rZT0iIzMwZDE1OCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+CjxwYXRoIGQ9Ik04IDEyaDgiIHN0cm9rZT0iIzMwZDE1OCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiLz4KPHN2ZyB4PSIzMCIgeT0iMzAiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIj4KPHBhdGggZD0iTTEyIDJjNS41MiAwIDEwIDQuNDggMTAgMTBzLTQuNDggMTAtMTAgMTBTMiAxNy41MiAyIDEyczQuNDgtMTAgMTAtMTBaIiBzdHJva2U9IiNmZjNiMzAiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSIvPgo8L3N2Zz4KPHN2ZyB4PSI2MCIgeT0iNjAiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIj4KPHBhdGggZD0iTTEyIDJjNS41MiAwIDEwIDQuNDggMTAgMTBzLTQuNDggMTAtMTAgMTBTMiAxNy41MiAyIDEyczQuNDgtMTAgMTAtMTBaIiBzdHJva2U9IiMwMDdhZmYiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSIvPgo8L3N2Zz4KPHN2ZyB4PSI3NSIgeT0iNzUiIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIj4KPHBhdGggZD0iTTYgMTJoMTJtLTYtNnY2bTAtNnY2IiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+Cjwvc3ZnPgo8L3N2Zz4KPC9zdmc+',
                    badge: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyUzYuNDggMjIgMTIgMjJTMjIgMTcuNTIgMjIgMTJTMTcuNTIgMiAxMiAyWk0xMCAxN0w1IDEyTDYuNDEgMTAuNTlMMTAgMTRMMTcuNTkgNi40MUwxOSA4TDEwIDE3WiIgZmlsbD0iIzMwZDE1OCIvPgo8L3N2Zz4K',
                    tag: `workout-timer-${timerType}`,
                    requireInteraction: false,
                    silent: false
                });

                // Auto-close notification after 10 seconds
                setTimeout(() => notification.close(), 10000);

                // Focus app when notification is clicked
                notification.onclick = function() {
                    window.focus();
                    this.close();
                };
            }
        }
        
        // Save a weight for a given workout/exercise/set
        function saveWeight(workout, exercise, set, weight) {
            const key = `${workout}-${exercise}-${set}`;
            localStorage.setItem(key, weight.toString());
        }

        function loadWeight(workout, exercise, set) {
            const key = `${workout}-${exercise}-${set}`;
            return parseInt(localStorage.getItem(key)) || 0;
        }

        function editWeight(workout, exercise, set) {
            const currentWeight = loadWeight(workout, exercise, set);
            const newWeight = prompt(`Enter weight for ${exercise} - Set ${set}:`, currentWeight);
            
            if (newWeight !== null && !isNaN(newWeight) && newWeight >= 0) {
                saveWeight(workout, exercise, set, parseInt(newWeight));
                updateWeightDisplay(workout, exercise, set, parseInt(newWeight));
            }
        }

        function updateWeightDisplay(workout, exercise, set, weight) {
            const buttons = document.querySelectorAll(`[onclick="editWeight('${workout}', '${exercise}', ${set})"]`);
            buttons.forEach(button => {
                button.textContent = `${weight} lbs`;
            });
        }

        function loadAllWeights() {
            // Load weights for all exercises on page load
            const exercises = {
                push: ['Incline Dumbbell Press', 'Flat Dumbbell Press', 'Pec Flys', 'Tricep Pushdown', 'Overhead Press', 'Lateral Raises'],
                pull: ['Lat Pulldown', 'Mid Row', 'Cable Pullovers', 'Bicep Curls', 'Face Pulls', 'Reverse Flys'],
                legs: ['Leg Press', 'Leg Extension', 'Leg Curl', 'Walking Lunges', 'Calf Raises', 'Cable Oblique Twists', 'Crunch Machine']
            };

            Object.keys(exercises).forEach(workout => {
                exercises[workout].forEach(exercise => {
                    const sets = exercise === 'Incline Dumbbell Press' || exercise === 'Lat Pulldown' || exercise === 'Mid Row' || exercise === 'Leg Press' || exercise === 'Calf Raises' ? 4 : 3;
                    for (let set = 1; set <= sets; set++) {
                        const weight = loadWeight(workout, exercise, set);
                        updateWeightDisplay(workout, exercise, set, weight);
                    }
                });
            });
        }

        // Stats modal functions
        function openStatsModal() {
            const modal = document.getElementById('stats-modal');
            const statsText = generateWorkoutStats();
            document.getElementById('stats-text').value = statsText;
            modal.classList.add('show');
        }

        function closeStatsModal() {
            const modal = document.getElementById('stats-modal');
            modal.classList.remove('show');
        }

        function generateWorkoutStats() {
            const currentWorkout = document.querySelector('.workout-content.active').id.replace('-content', '');
            const date = new Date().toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' });
            
            let stats = `🏋️ WORKOUT SUMMARY - ${date.toUpperCase()}\n`;
            stats += `📋 ${currentWorkout.toUpperCase()} DAY\n\n`;

            // Get exercise data based on current workout
            const exercises = {
                push: [
                    { name: 'Incline Dumbbell Press', sets: 4, hasWeight: true },
                    { name: 'Flat Dumbbell Press', sets: 3, hasWeight: true },
                    { name: 'Pec Flys', sets: 3, hasWeight: true },
                    { name: 'Tricep Pushdown', sets: 3, hasWeight: true },
                    { name: 'Overhead Press', sets: 3, hasWeight: true },
                    { name: 'Lateral Raises', sets: 3, hasWeight: true }
                ],
                pull: [
                    { name: 'Lat Pulldown', sets: 4, hasWeight: true },
                    { name: 'Mid Row', sets: 4, hasWeight: true },
                    { name: 'Cable Pullovers', sets: 3, hasWeight: true },
                    { name: 'Bicep Curls', sets: 3, hasWeight: true },
                    { name: 'Face Pulls', sets: 3, hasWeight: true },
                    { name: 'Reverse Flys', sets: 3, hasWeight: true }
                ],
                legs: [
                    { name: 'Leg Press', sets: 4, hasWeight: true },
                    { name: 'Leg Extension', sets: 3, hasWeight: true },
                    { name: 'Leg Curl', sets: 3, hasWeight: true },
                    { name: 'Walking Lunges', sets: 3, hasWeight: true },
                    { name: 'Calf Raises', sets: 4, hasWeight: true },
                    { name: 'Cable Oblique Twists', sets: 3, hasWeight: true },
                    { name: 'Crunch Machine', sets: 3, hasWeight: true },
                    { name: 'Plank Hold', sets: 3, hasWeight: false },
                    { name: 'Mountain Climbers', sets: 3, hasWeight: false }
                ]
            };

            // Add exercise stats
            exercises[currentWorkout].forEach(exercise => {
                stats += `💪 ${exercise.name}\n`;
                for (let set = 1; set <= exercise.sets; set++) {
                    if (exercise.hasWeight) {
                        const weight = loadWeight(currentWorkout, exercise.name, set);
                        stats += `   Set ${set}: ${weight} lbs\n`;
                    } else {
                        stats += `   Set ${set}: Bodyweight\n`;
                    }
                }
                stats += '\n';
            });

            // Add cardio stats
            const cardioTimers = {
                push: { name: 'HIIT Cardio', element: 'hiit-timer' },
                pull: { name: 'Steady Cardio', element: 'steady-timer' },
                legs: { name: 'Cool-down', element: 'cooldown-timer' }
            };

            const cardio = cardioTimers[currentWorkout];
            const timerElement = document.getElementById(cardio.element);
            const timeRemaining = timerElement.textContent;
            
            stats += `🏃 ${cardio.name}\n`;
            if (timeRemaining === 'Complete!') {
                stats += '   Status: Completed ✅\n';
            } else {
                stats += `   Status: ${timeRemaining} remaining\n`;
            }

            stats += `\n📊 PROGRESS\n`;
            stats += `Sets Completed: ${completedSets[currentWorkout]}/${totalSets[currentWorkout]}\n`;
            const percentage = Math.round((completedSets[currentWorkout] / totalSets[currentWorkout]) * 100);
            stats += `Completion: ${percentage}%\n`;

            return stats;
        }

        function copyStats() {
            const statsText = document.getElementById('stats-text');
            statsText.select();
            statsText.setSelectionRange(0, 99999); // For mobile devices
            
            try {
                navigator.clipboard.writeText(statsText.value).then(() => {
                    const copyButton = document.querySelector('.stats-copy');
                    const originalText = copyButton.textContent;
                    copyButton.textContent = 'Copied!';
                    setTimeout(() => {
                        copyButton.textContent = originalText;
                    }, 2000);
                });
            } catch (err) {
                // Fallback for older browsers
                document.execCommand('copy');
                const copyButton = document.querySelector('.stats-copy');
                const originalText = copyButton.textContent;
                copyButton.textContent = 'Copied!';
                setTimeout(() => {
                    copyButton.textContent = originalText;
                }, 2000);
            }
        }

        // Update current date
        function updateCurrentDate() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                month: 'short', 
                day: 'numeric' 
            };
            const formattedDate = now.toLocaleDateString('en-US', options).toUpperCase();
            document.getElementById('current-date').textContent = formattedDate;
        }

        // Update greeting based on time of day
        function updateGreeting() {
            const now = new Date();
            const hour = now.getHours();
            let greeting;
            
            if (hour < 12) {
                greeting = "Good morning, Arjun";
            } else if (hour < 17) {
                greeting = "Good afternoon, Arjun";
            } else {
                greeting = "Good evening, Arjun";
            }
            
            document.getElementById('main-title').textContent = greeting;
        }

        // Schedule next date update
        function scheduleNextDateUpdate() {
            const now = new Date();
            const tomorrow = new Date(now);
            tomorrow.setDate(tomorrow.getDate() + 1);
            tomorrow.setHours(0, 0, 0, 0);
            
            const msUntilMidnight = tomorrow.getTime() - now.getTime();
            
            setTimeout(() => {
                updateCurrentDate();
                updateGreeting();
                scheduleNextDateUpdate(); // Schedule the next update
            }, msUntilMidnight);
        }

        // Schedule greeting updates at time boundaries
        function scheduleGreetingUpdates() {
            const now = new Date();
            const currentHour = now.getHours();
            
            // Calculate next greeting change time
            let nextUpdateHour;
            if (currentHour < 12) {
                nextUpdateHour = 12; // Next is afternoon
            } else if (currentHour < 17) {
                nextUpdateHour = 17; // Next is evening
            } else {
                nextUpdateHour = 24; // Next is tomorrow morning
            }
            
            const nextUpdate = new Date(now);
            if (nextUpdateHour === 24) {
                nextUpdate.setDate(nextUpdate.getDate() + 1);
                nextUpdate.setHours(0, 0, 0, 0);
            } else {
                nextUpdate.setHours(nextUpdateHour, 0, 0, 0);
            }
            
            const msUntilNextGreeting = nextUpdate.getTime() - now.getTime();
            
            setTimeout(() => {
                updateGreeting();
                scheduleGreetingUpdates(); // Schedule the next greeting update
            }, msUntilNextGreeting);
        }

        // Update date immediately and schedule future updates
        updateCurrentDate();
        updateGreeting();
        scheduleNextDateUpdate();
        scheduleGreetingUpdates();

        // Load saved weights
        loadAllWeights();

        // Timer functionality
        const timers = {
            hiit: { duration: 15 * 60, current: 15 * 60, interval: null },
            steady: { duration: 25 * 60, current: 25 * 60, interval: null },
            cooldown: { duration: 15 * 60, current: 15 * 60, interval: null }
        };

        // HIIT interval timer
        let hiitState = {
            totalTime: 15 * 60,
            currentTotal: 15 * 60,
            intervalTime: 30,
            currentInterval: 30,
            isHighIntensity: true,
            isRunning: false,
            interval: null
        };

        function switchWorkout(workout) {
            // Remove active class from all tabs and content
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.workout-content').forEach(content => content.classList.remove('active'));
            
            // Add active class to selected tab and content
            event.target.classList.add('active');
            document.getElementById(workout + '-content').classList.add('active');
        }

        function toggleSet(setElement, workout) {
            setElement.classList.toggle('completed');
            
            const progressCircle = setElement.querySelector('.set-progress');
            const isCompleted = setElement.classList.contains('completed');
            
            if (isCompleted) {
                progressCircle.style.strokeDashoffset = '0';
                completedSets[workout]++;
                
                // Start rest timer
                const exerciseCard = setElement.closest('.exercise-card');
                startRestTimer(exerciseCard);
            } else {
                progressCircle.style.strokeDashoffset = '88';
                completedSets[workout]--;
            }
        }

        function startRestTimer(exerciseCard) {
            // Remove any existing timer for this exercise
            const existingTimer = exerciseCard.querySelector('.rest-timer');
            if (existingTimer) {
                existingTimer.remove();
            }

            // Clear any existing interval for this card
            const cardId = exerciseCard.querySelector('.exercise-title').textContent;
            if (restTimers[cardId]) {
                clearInterval(restTimers[cardId].interval);
            }

            // Create timer element
            const timerElement = document.createElement('div');
            timerElement.className = 'rest-timer';
            timerElement.innerHTML = '2:00';
            timerElement.onclick = () => dismissRestTimer(exerciseCard, cardId);

            // Add to card header
            const header = exerciseCard.querySelector('.exercise-header');
            header.appendChild(timerElement);

            // Start countdown
            let timeLeft = 120; // 2 minutes in seconds
            
            restTimers[cardId] = {
                interval: setInterval(() => {
                    timeLeft--;
                    const minutes = Math.floor(timeLeft / 60);
                    const seconds = timeLeft % 60;
                    timerElement.innerHTML = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                    
                    if (timeLeft <= 0) {
                        dismissRestTimer(exerciseCard, cardId);
                    }
                }, 1000),
                element: timerElement
            };
        }

        function dismissRestTimer(exerciseCard, cardId) {
            const timer = exerciseCard.querySelector('.rest-timer');
            if (timer) {
                timer.remove();
            }
            
            if (restTimers[cardId]) {
                clearInterval(restTimers[cardId].interval);
                delete restTimers[cardId];
            }
        }
            const currentWorkout = document.querySelector('.workout-content.active').id.replace('-content', '');
            const completed = completedSets[currentWorkout];
            const total = totalSets[currentWorkout];
            const percentage = (completed / total) * 100;
            
            



        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function startHIITTimer() {
            if (hiitState.interval) clearInterval(hiitState.interval);
            
            // Request notification permission on first timer start
            requestNotificationPermission();
            
            hiitState.isRunning = true;
            const timerElement = document.getElementById('hiit-timer');
            const phaseElement = document.getElementById('hiit-phase');
            const cardElement = document.getElementById('hiit-card');
            const fullscreenOverlay = document.getElementById('fullscreen-overlay');
            
            // Update card color immediately
            updateHIITCardStyle(cardElement, hiitState.isHighIntensity);
            
            hiitState.interval = setInterval(() => {
                hiitState.currentInterval--;
                hiitState.currentTotal--;
                
                // Update display with total time remaining
                const timeDisplay = formatTime(hiitState.currentTotal);
                timerElement.textContent = timeDisplay;
                
                // Update fullscreen if active
                if (currentFullscreenTimer === 'hiit') {
                    const fullscreenTimer = document.getElementById('fullscreen-timer');
                    const fullscreenPhase = document.getElementById('fullscreen-hiit-phase');
                    if (fullscreenTimer) fullscreenTimer.textContent = timeDisplay;
                    if (fullscreenPhase) {
                        if (hiitState.isHighIntensity) {
                            fullscreenPhase.textContent = `HIGH INTENSITY - ${hiitState.currentInterval}s`;
                        } else {
                            fullscreenPhase.textContent = `RECOVERY - ${hiitState.currentInterval}s`;
                        }
                    }
                    // Update fullscreen background
                    updateHIITCardStyle(fullscreenOverlay, hiitState.isHighIntensity);
                }
                
                // Update phase display
                if (hiitState.isHighIntensity) {
                    phaseElement.textContent = `HIGH INTENSITY - ${hiitState.currentInterval}s`;
                } else {
                    phaseElement.textContent = `RECOVERY - ${hiitState.currentInterval}s`;
                }
                
                // Flash for last 3 seconds
                if (hiitState.currentInterval <= 3 && hiitState.currentInterval > 0) {
                    cardElement.classList.add('flash');
                    if (currentFullscreenTimer === 'hiit') {
                        fullscreenOverlay.classList.add('flash');
                    }
                    setTimeout(() => {
                        cardElement.classList.remove('flash');
                        fullscreenOverlay.classList.remove('flash');
                    }, 500);
                }
                
                // Check if current interval is complete
                if (hiitState.currentInterval <= 0) {
                    // Switch between high intensity and recovery
                    hiitState.isHighIntensity = !hiitState.isHighIntensity;
                    hiitState.intervalTime = hiitState.isHighIntensity ? 30 : 90;
                    hiitState.currentInterval = hiitState.intervalTime;
                    
                    // Update card color
                    updateHIITCardStyle(cardElement, hiitState.isHighIntensity);
                    if (currentFullscreenTimer === 'hiit') {
                        updateHIITCardStyle(fullscreenOverlay, hiitState.isHighIntensity);
                    }
                }
                
                // Check if total workout is complete
                if (hiitState.currentTotal <= 0) {
                    clearInterval(hiitState.interval);
                    timerElement.textContent = "Complete!";
                    phaseElement.textContent = "HIIT Workout Complete!";
                    
                    // Send notification
                    sendTimerNotification('hiit', 'Your 15-minute HIIT cardio session is complete! 🔥');
                    
                    // Reset card style
                    cardElement.className = 'card cardio-card';
                    fullscreenOverlay.style.background = 'linear-gradient(135deg, #ff9500, #ff6b00)';
                    
                    hiitState.isRunning = false;
                    
                    if (currentFullscreenTimer === 'hiit') {
                        const fullscreenTimer = document.getElementById('fullscreen-timer');
                        const fullscreenPhase = document.getElementById('fullscreen-hiit-phase');
                        if (fullscreenTimer) fullscreenTimer.textContent = "Complete!";
                        if (fullscreenPhase) fullscreenPhase.textContent = "HIIT Workout Complete!";
                    }
                }
            }, 1000);
        }

        function updateHIITCardStyle(element, isHighIntensity) {
            // Remove existing classes
            element.classList.remove('high-intensity', 'recovery');
            
            // Add appropriate class
            if (isHighIntensity) {
                element.classList.add('high-intensity');
                if (element === document.getElementById('fullscreen-overlay')) {
                    element.style.background = 'linear-gradient(135deg, #ff3b30, #d12b20)';
                }
            } else {
                element.classList.add('recovery');
                if (element === document.getElementById('fullscreen-overlay')) {
                    element.style.background = 'linear-gradient(135deg, #30d158, #28a745)';
                }
            }
        }

// ----------------------------------------------------------------------------
// Background-safe timer + “Mark as Complete”
// ----------------------------------------------------------------------------
const _timers = {
  hiit: 15*60,
  steady: 25*60,
  cooldown: 15*60
};
const _running = {};

function startTimer(type) {
  if (type==='hiit') return startHIITTimer();

  // clear existing
  if (_running[type]) clearInterval(_running[type].interval);

  const duration = _timers[type];
  const endTime = Date.now() + duration*1000;
  const display = document.getElementById(`${type}-timer`);

  function tick() {
    const secs = Math.round((endTime - Date.now())/1000);
    if (secs>=0) {
      display.textContent = formatTime(secs);
      _running[type].raf = requestAnimationFrame(tick);
    } else {
      finish();
    }
  }

  function finish() {
    cancelAnimationFrame(_running[type].raf);
    display.textContent = 'Complete!';
    sendTimerNotification(type,
      type==='steady'
        ? 'Your 25-minute steady session is complete! 🚶‍♂️'
        : 'Your 15-minute cool-down is complete! 🧘‍♂️'
    );
  }

  // store handles
  _running[type] = {
    raf: null,
    interval: null
  };

  // wire background catch-up
  document.addEventListener('visibilitychange', () => {
    if (!document.hidden && _running[type]) tick();
  });

  // kick off
  tick();
}

function resetTimer(type) {
  if (_running[type]) {
    cancelAnimationFrame(_running[type].raf);
    clearInterval(_running[type].interval);
  }
  const display = document.getElementById(`${type}-timer`);
  display.textContent = formatTime(_timers[type]);
}

// New helper for your “Mark as Complete” buttons
function markComplete(type) {
  if (_running[type]) {
    cancelAnimationFrame(_running[type].raf);
    clearInterval(_running[type].interval);
    document.getElementById(`${type}-timer`).textContent = 'Complete!';
  }
}

// Helper to format MM:SS
function formatTime(sec) {
  const m = Math.floor(sec/60).toString().padStart(2,'0');
  const s = (sec%60).toString().padStart(2,'0');
  return `${m}:${s}`;
}


        function resetAllProgress() {
            document.querySelectorAll('.set-ring').forEach(ring => {
                ring.classList.remove('completed');
                const progressCircle = ring.querySelector('.set-progress');
                progressCircle.style.strokeDashoffset = '88';
            });
            
            completedSets = { push: 0, pull: 0, legs: 0 };

        }

        // Initialize


        // Register Service Worker for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                const swCode = `
                    const CACHE_NAME = 'workout-tracker-v1';
                    const urlsToCache = ['/'];

                    self.addEventListener('install', (event) => {
                        event.waitUntil(
                            caches.open(CACHE_NAME)
                                .then((cache) => cache.addAll(urlsToCache))
                        );
                    });

                    self.addEventListener('fetch', (event) => {
                        event.respondWith(
                            caches.match(event.request)
                                .then((response) => {
                                    return response || fetch(event.request);
                                })
                        );
                    });
                `;
                
                const blob = new Blob([swCode], { type: 'application/javascript' });
                const swUrl = URL.createObjectURL(blob);
                
                navigator.serviceWorker.register(swUrl)
                    .then((registration) => {
                        console.log('SW registered: ', registration);
                    })
                    .catch((registrationError) => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }

        // Add to Home Screen prompt (for Android)
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
        });
    </script>
</body>
</html>